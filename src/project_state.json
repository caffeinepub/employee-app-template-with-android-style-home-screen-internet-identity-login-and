{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 11,
  "summary": "Employee app template styled like an Android OS home screen with icon-based navigation, supporting employee login and admin-controlled access/roles, and three starter modules with placeholder pages.",
  "architectural_notes": [
    "Generate a user-facing short identifier for access requests: 4-character code (alphanumeric) shown to both requester and admins.",
    "Deleting an approved user must revoke all permissions, including admin role, and remove their access entirely.",
    "Admin UI/logic must differentiate between approved users and admins (distinct role/status).",
    "Frontend must call backend requestApprovalWithName (not deprecated requestApproval) from the Request Approval button/flow."
  ],
  "known_issues": [
    "Approve/Decline actions for pending access requests are not working (buttons have no effect / do not update access state).",
    "Admin Dashboard pending approvals shows requester name as \"name not available\" for newly submitted requests.",
    "Admin Dashboard displays a different 4-character identifier than what the requester sees for the same pending access request.",
    "Request access flow fails for new Internet Identity because frontend still calls deprecated requestApproval API; backend returns error: \"Deprecated: Please use requestApprovalWithName instead\"."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-implement-internet-identity-based-authentication-for-employees-and-gate-app-access-so-that-only-approved-employee-principals-can-use-the-app-after-signing-in",
      "title": "Implement Internet Identity-based authentication for employees and gate app access so that only approved employee principals can use the app after signing in.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-admin-access-control-with-an-initial-bootstrap-admin-and-admin-login-experience-that-allows-admins-to-approve-employee-principals-grant-revoke-admin-rights-to-other-approved-users-and-view-lists-of-pending-approved-users",
      "title": "Add admin access control with an initial bootstrap admin and admin login experience that allows admins to approve employee principals, grant/revoke admin rights to other approved users, and view lists of pending/approved users.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-android-os-style-start-home-screen-with-a-wallpaper-like-background-and-a-grid-of-tappable-app-icons-that-navigate-to-modules-friesland-fungies-land-van-ons-and-pottle",
      "title": "Create an Android OS-style start (home) screen with a wallpaper-like background and a grid of tappable app icons that navigate to modules: “Friesland Fungies”, “Land van Ons”, and “Pottle”.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-placeholder-module-pages-for-friesland-fungies-land-van-ons-and-pottle-each-showing-a-module-title-and-placeholder-content-plus-a-consistent-way-to-return-to-the-home-screen",
      "title": "Implement placeholder module pages for “Friesland Fungies”, “Land van Ons”, and “Pottle”, each showing a module title and placeholder content, plus a consistent way to return to the home screen.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-admin-managed-content-editing-so-admins-can-change-add-admin-specified-content-that-is-visible-in-the-app-start-with-a-simple-global-announcement-message-shown-on-the-home-screen-and-editable-from-the-admin-area",
      "title": "Add admin-managed content editing so admins can change/add admin-specified content that is visible in the app (start with a simple global announcement/message shown on the home screen and editable from the Admin area).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-distinctive-visual-theme-across-the-app-consistent-with-an-android-home-screen-aesthetic-wallpaper-icon-style-typography-spacing-and-avoid-default-unstyled-layouts-do-not-use-a-blue-purple-primary-palette",
      "title": "Apply a coherent, distinctive visual theme across the app consistent with an Android home-screen aesthetic (wallpaper, icon style, typography, spacing) and avoid default/unstyled layouts; do not use a blue/purple primary palette.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-generated-static-image-assets-wallpaper-module-icons-and-render-them-in-the-ui-from-the-frontend-public-assets-folder-do-not-serve-images-through-the-backend",
      "title": "Add generated static image assets (wallpaper + module icons) and render them in the UI from the frontend public assets folder (do not serve images through the backend).",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-admin-dashboard-pending-approval-approve-and-reject-actions-so-that-clicking-the-buttons-actually-updates-the-corresponding-user-s-approval-status-in-the-backend-and-the-ui-refreshes-to-reflect-the-change",
      "title": "Fix the Admin Dashboard pending-approval Approve and Reject actions so that clicking the buttons actually updates the corresponding user’s approval status in the backend and the UI refreshes to reflect the change.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-access-request-flow-so-that-when-a-logged-in-but-unapproved-user-clicks-request-approval-they-must-enter-their-name-and-after-submitting-they-see-a-pending-state-that-displays-both-their-entered-name-and-a-generated-short-identifier",
      "title": "Update the access request flow so that when a logged-in but unapproved user clicks “Request Approval”, they must enter their name, and after submitting they see a pending state that displays both their entered name and a generated short identifier.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-dashboard-pending-approvals-list-to-display-the-requesting-user-s-name-and-4-character-identifier-instead-of-showing-only-a-partial-principal-string",
      "title": "Update the Admin Dashboard pending approvals list to display the requesting user’s name and 4-character identifier (instead of showing only a partial principal string).",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-there-is-a-clear-distinction-between-normal-approved-users-and-admins-in-both-backend-role-logic-and-the-admin-dashboard-ui-admins-must-be-able-to-grant-and-revoke-admin-rights-for-approved-users-with-the-current-role-status-clearly-shown",
      "title": "Ensure there is a clear distinction between normal approved users and admins in both backend role logic and the Admin Dashboard UI; admins must be able to grant and revoke admin rights for approved users with the current role/status clearly shown.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-only-ability-to-remove-an-approved-user-such-that-removing-the-user-fully-deletes-their-access-rights-including-revoking-admin-rights-if-present-and-prevents-them-from-accessing-the-app-until-they-request-approval-again",
      "title": "Add an admin-only ability to remove an approved user such that removing the user fully deletes their access rights (including revoking admin rights if present) and prevents them from accessing the app until they request approval again.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-query-invalidation-refetch-behavior-so-that-changes-to-approvals-roles-and-user-removal-reliably-update-all-relevant-ui-states-admin-dashboard-lists-and-the-logged-in-user-s-access-gating-state-without-a-full-reload",
      "title": "Update frontend query invalidation/refetch behavior so that changes to approvals, roles, and user removal reliably update all relevant UI states (Admin Dashboard lists and the logged-in user’s access gating state) without a full reload.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-identify-and-fix-the-root-cause-that-prevents-an-unapproved-logged-in-user-from-successfully-submitting-an-access-request-the-ui-returns-to-the-request-access-form-with-no-pending-state-and-the-request-never-appears-in-admin-dashboard",
      "title": "Identify and fix the root cause that prevents an unapproved logged-in user from successfully submitting an access request (the UI returns to the Request Access form with no pending state, and the request never appears in Admin Dashboard).",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-frontend-update-accesspendingscreen-to-use-the-fixed-backend-flow-submit-name-request-approval-in-one-successful-operation-and-render-the-pending-state-using-backend-returned-data-name-4-character-identifier-rather-than-generating-a-random-client-side-id",
      "title": "Frontend: Update AccessPendingScreen to use the fixed backend flow (submit name + request approval in one successful operation), and render the pending state using backend-returned data (name + 4-character identifier) rather than generating a random client-side ID.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-frontend-update-admindashboard-pending-approvals-display-to-use-the-backend-provided-request-name-and-4-character-identifier-for-each-pending-approval-and-remove-any-placeholder-derived-id-logic-that-can-diverge-from-what-the-requester-sees",
      "title": "Frontend: Update AdminDashboard pending approvals display to use the backend-provided request name and 4-character identifier for each pending approval (and remove any placeholder/derived ID logic that can diverge from what the requester sees).",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-access-pending-screen-to-stop-generating-storing-a-client-side-random-4-character-id-and-instead-render-the-pending-state-using-the-backend-returned-requester-name-and-backend-generated-4-character-identifier-from-the-request-approval-call",
      "title": "Update the Access Pending screen to stop generating/storing a client-side random 4-character ID and instead render the pending state using the backend-returned requester name and backend-generated 4-character identifier from the request-approval call.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-dashboard-pending-approvals-list-to-display-the-backend-provided-requester-name-and-backend-provided-4-character-identifier-for-each-pending-approval-and-remove-any-principal-derived-identifier-generation-and-the-name-not-available-placeholder-warning-for-newly-submitted-requests",
      "title": "Update the Admin Dashboard pending approvals list to display the backend-provided requester name and backend-provided 4-character identifier for each pending approval, and remove any principal-derived identifier generation and the \"Name not available\" placeholder/warning for newly submitted requests.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-access-request-flow-so-that-no-ui-path-calls-the-deprecated-backend-method-requestapproval-which-traps-with-deprecated-please-use-requestapprovalwithname-instead-and-instead-all-request-access-actions-call-requestapprovalwithname-name-with-a-user-provided-name",
      "title": "Update the frontend access-request flow so that no UI path calls the deprecated backend method `requestApproval()` (which traps with \"Deprecated: Please use requestApprovalWithName instead\"), and instead all request-access actions call `requestApprovalWithName(name)` with a user-provided name.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Android-style start screen (home screen) with icons to navigate to modules",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Employee login functionality",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Admin login and access control: approve specific internet identities before they can log in",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Admin role management: grant admin rights to other users",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Admin-managed content: change/add admin-specified content in the app",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Three starter modules (Friesland Fungies, Land van Ons, Pottle) with placeholder pages on click",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Access request flow: user enters their name and is shown a pending state displaying their name plus a generated 4-character short ID (visible to both user and admin)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Admin UI: show list of approved identities with ability to remove a user; removal fully deletes access and revokes admin rights if present",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Admin system should clearly distinguish normal approved users vs admins (separate roles/status in UI and management views)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Generate a short identifier for each access request that is exactly 4 characters long, and make the identifier visible to both the requesting user (on their pending screen) and admins (in the pending approvals list).",
      "reqIds": [
        "REQ-10"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Backend: Update the approval-request API so that unapproved users can submit their name as part of requesting approval, without tripping backend authorization checks (current backend rejects saving a profile unless already approved/admin).",
      "reqIds": [
        "REQ-16"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Backend: Ensure the pending approval record contains (and returns) a generated short identifier that is exactly 4 characters long and is stable for that pending request (so the user and admins see the same identifier).",
      "reqIds": [
        "REQ-17"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Update the backend to persist pending access-request metadata (requester name + generated 4-character identifier) in a backend-owned record so the identifier is stable and the same data can be displayed to both the requester and admins.",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Change the backend access-request API so that an unapproved logged-in user can submit their name as part of requesting approval in one operation, and the backend returns the canonical pending-request data (name + 4-character identifier) to the caller.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Employee app template with Android-style home screen, Internet Identity login, and admin-controlled access",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}